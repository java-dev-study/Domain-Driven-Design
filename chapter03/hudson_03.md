## 애그리거트
### 애그리거트
- 상위 수준 개념을 이해를 위해서는 도메인 전문가와의 소통, 더 많은 코드 분석이 필요.
- 도메인 객체 모델이 복잡해지면 개별 구성요소 위주로 모델을 이해하게 되고 전반적인 구조나 도메인 간 관계를 파악하기 어렵다.
- 상위 수준에서 모델을 조망할 수 있는 방법.
- 애그리거트는 복잡한 도메인을 단순한 구조로 만들어준다.

### 애그리거트 루트
- 애그리거트 전체를 관리하는 주체가 애그리거트의 루트 엔티티이다.
- 애그리거트에 속한 객체는 애그리거트 루트 엔티티에 직접 또는 간접적으로 속하게 된다.

#### 도메인 규칙과 일관성
  - 애그리거트 루트의 핵심 역할은 애그리거트의 일관성이 깨지지 않도록 하는 것이다. 이를 위해 애그리거트 루트는 애그리거트가 제공해야 할 도메인 기능을 구현한다.

애그리거트 루트를 통해서만 도메인 로직을 구현하게 만들려면 
- 단순히 필드를 변경하는 set 메서드를 public으로 만들지 않는다.
- 밸류 타입은 불변으로 구현한다.

#### 트랜잭션 범위
- 트랜잭션 범위는 작을수록 좋다. 

### 리포지터리와 애그리거트
- 리포지터리는 애그리거트 전체를 저장소에 영속화해야 한다.
- 애그리거트를 구하는 리포지터리 메서드는 완전한 애그리거트를 제공해야 한다.

### ID를 이용한 애그리거트 참조
- 애그리거트도 다른 애그리거트를 참조한다.
- 필드를 이용한 애그리거트 참조는 다음 문제를 야기할 수 있다.
  - 편한 탐색 오용
  - 성능에 대한 고민
  - 확장 어려움
- 위 세가지 문제를 완화할 때 사용할 수 있는 것이 ID를 이용한 애그리거트 참조이다.

### 애그리거트 간 집합 연관

### 애그리거트를 팩토리로 사용하기
- 도메인의 응집도가 높아진다.
