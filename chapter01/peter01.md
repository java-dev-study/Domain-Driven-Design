# 1.도메인 모델 시작하기 
## 1.1 도메인이란?

- 도메인은 소프트웨어로 해결하고자 하는 문제 영역
- 온라인 서점 소프트웨어
- 온라인으로 책을 판매하는 데 필요한 상품조회, 구매, 결제, 배송 추적 등의 기능 등을 
- 어떻게 소프트웨어 적으로 제공할 것인가 
도메인은 여러 하위 도메인으로 구성 
(주문 회원 혜택 회원 카탈로그 리뷰 정산 배송 결제 )

각각의 문제 영역은 자체적 구현을 통해 해결할 수 있고, 외부 시스템(모듈)을 통해 해결 가능하다.(PG서비스,외부 물류 서비스(택배))

## 1.2 도메인 전문가와 개발자 간 지식 공유  
- 현업, 소프트웨어의 전체 프로세스 요구사항을 정의하고 제대로 이해하고 구현해야 한다. 
- 개발자와 현업간의 대화를 통해 요구사항을 올바르게 이해해야 한다. 
- 도메인 전문가, 관계자, 개발자가 같은 지식을 공유하고 직접 소통 
- 요구사항 그대로가 아닌 왜 이런 요구 사항이 발생했는지 파악 필요 

## 1.3 도메인 모델 
도메인모델 
- 객체 기반 도메인 모델 
- 상태 다이어 그램을 이용한 모델링 
- 그래프 , 수학공식 등을 활용해서 도메인 모델을 만들 수 있다. 
- 도메인을 이해하는데 도움이 된다면 어떤 표현 방식이든 좋다. 
도메인 모델은 여러 관계자들이 동일한 모습으로 도메인을 이해하고 도메인 지식을 공유하는 데 도움을 준다.

## 1.4 도메인 모델 패턴 
###  Presentation
사용자의 요청을 처리하고 사용자에게 정보를 보여준다. 
###  Application
사용자가 요청한 기능을 실행한다. 업무로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행한다. 
###  Domain
시스템이 제공할 도메인 규칙을 구현한다. 
데이베이스나 메시징 시스템과 같은 외부 시스템과의 연동을 처리한다. 
도메인 모델은 아키텍쳐 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴을 말한다. 
도메인 계층은 도메인의 핵심 규칙을 구현한다. 
###  Infrastructure
데이터 베이스나 메시징 시스템과 같은 외부 시스템과의 연동을 처리한다.

주문과 관련된 중요업무규칙은 주문 도메인 모델(order orderstate)에서 구현 
핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해야 할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영할 수 있다. 

개념모델은 순수하게 문제를 분석한 결과물 
구현 모델은 개념모델을 구현 가능한 형태의 모델로 점진적으로 발전 시킨 것 
프로젝트 초기에는 개요 수준의 개념 모델로 도메인에 대한 전체 윤곽을 이해하는 데 집중하고 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시킨다. 

## 1.5 도메인 모델 도출 
- 기획서, 유스케이스, 사용자 스토리 와 같은 요구사항과 관련자와의 대화를 통해 도메인을 이해하고 이를 바탕으로 도메인 모델 초안을 만들어야 코드를 작성할 수 있다. 
- 기본작업 -> 핵심 구성요소, 규칙, 기능을 찾는다 ( 이과정은 요구사항에서 출발한다.)
- 요구사항 분석 -> 필요한 기능 도출 
상위 수준에서 정리한 문서 
- 전체 프로그램 구조를 빠르게 이해하는데 도움이 된다. 
코드는 더 깊은 이해를 돕는다. 
- 코드를 보면서 깊게 이해하게 되므로 도메인 지식이 잘 묻어나도록 코드를 작성해야 한다. 



## 1.6 엔티티와 밸류 
### 엔티티
- 식별자를 가짐
 엔티티의 식별자는 바뀌지 않음 
 엔티티를 생성하고, 속성을 바꾸고, 삭제할 때까지 식별자는 유지 
- 두 엔티티 식별자가 같다 = 두 엔티티는 같다 

### 엔티티의 식별자 생성
식별자 생성 
- 특정 규칙에 따라 생성 (주민번호,카드번호)
- UUID나 nano ID와 같은 고유 식별자 생성기 사용 (식별자 생성기를 사용)
- 값을 직접 입력 (회원ID, 이메일)
- 일련번호 사용 (시쿼스 or DB 자동증가)

밸류 타입
- 밸류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다. 
ex) receiver -> receiverName 과 receiverPhoneNumber 필드를 갖고 이를 receiver 하나로 표현한다.
	Adderss 
	Money 
- 밸류타입을 위한 기능을 추가할 수 있다. 
- 밸류타입은 데이터 변경 기능을 제공하지 않는 불변 객체로 구현한다. 
- 두 밸류 객체를 비교할 때는 모든 속성이 같은지 비교한다. 


### 엔티티 식별자와 밸류 타입
식별자를 위한 밸류 타입을 사용해서 식별자의 의미가 잘드러나게 할 수 있다. 

### 도메인 모델에 set 메서드 넣지 않기
도메인 객체가 불완전한 상태로 사용되는 것을 막으려면 생성 시점에 필요한 것을 전달해 주어야 한다. 
생성자를 통해 필요한 데이터를 모두 받아야한다. 

## 1.7 도메인 용어와 유비쿼터스 언어 
- 도메인에서 사용하는 용어를 코드에 반영해야한다. 
- 코드에 도메인 규칙이 드러나게 해야 한다. 
- 코드의 가독성도 높이고 코드를 분석하고 이해하는 시간을 줄여준다. 도메인 규칙을 코드로 작성하게 되므로 버그도 줄어든다. 
- 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 문서, 도메인 모델, 코드, 테스트 등 모든곳에서 같은 용어를 사용한다. 
- 도메인에 대한 이해가 높아지면서 새롭게 